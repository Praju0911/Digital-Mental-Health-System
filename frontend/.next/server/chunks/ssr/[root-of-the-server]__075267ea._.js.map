{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishalprajwal/Documents/mental-health/frontend/src/app/admin/dashboard/page.jsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\n\nexport default function AdminDashboard() {\n  const [usersData, setUsersData] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [search, setSearch] = useState(\"\");\n  const [filterLevel, setFilterLevel] = useState(\"all\");\n  const [currentPage, setCurrentPage] = useState(1);\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [userHistory, setUserHistory] = useState([]);\n  const rowsPerPage = 10;\n\n  useEffect(() => {\n    const fetchUsers = async () => {\n      try {\n        const res = await fetch(\"/api/admin/getUsers\");\n        const data = await res.json();\n        setUsersData(data);\n      } catch (err) {\n        console.error(\"Error fetching admin data:\", err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchUsers();\n  }, []);\n\n  const filteredData = usersData.filter((user) => {\n    const searchMatch =\n      user.email.toLowerCase().includes(search.toLowerCase()) ||\n      user.uid.toLowerCase().includes(search.toLowerCase());\n\n    const levelMatch =\n      filterLevel === \"all\"\n        ? true\n        : filterLevel === \"low\"\n        ? user.stressLevel < 4\n        : filterLevel === \"medium\"\n        ? user.stressLevel >= 4 && user.stressLevel <= 7\n        : filterLevel === \"high\"\n        ? user.stressLevel > 7\n        : filterLevel === \"na\"\n        ? user.stressLevel === \"N/A\"\n        : true;\n\n    return searchMatch && levelMatch;\n  });\n\n  const totalPages = Math.ceil(filteredData.length / rowsPerPage);\n  const paginatedData = filteredData.slice(\n    (currentPage - 1) * rowsPerPage,\n    currentPage * rowsPerPage\n  );\n\n  const getRowColor = (stressLevel) => {\n    if (stressLevel === \"N/A\") return \"bg-gray-200\";\n    if (stressLevel < 4) return \"bg-green-100\";\n    if (stressLevel <= 7) return \"bg-yellow-100\";\n    return \"bg-red-100\";\n  };\n\n  // Quick summary counts\n  const lowCount = usersData.filter(u => u.stressLevel !== \"N/A\" && u.stressLevel < 4).length;\n  const mediumCount = usersData.filter(u => u.stressLevel >= 4 && u.stressLevel <= 7).length;\n  const highCount = usersData.filter(u => u.stressLevel > 7).length;\n  const naCount = usersData.filter(u => u.stressLevel === \"N/A\").length;\n\n  // Fetch stress history for selected user\n  const handleUserClick = async (user) => {\n    setSelectedUser(user);\n    try {\n      const res = await fetch(`/api/admin/getUserHistory?uid=${user.uid}`);\n      const history = await res.json();\n      setUserHistory(history.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp)));\n    } catch (err) {\n      console.error(\"Error fetching user history:\", err);\n      setUserHistory([]);\n    }\n  };\n\n  const closeModal = () => {\n    setSelectedUser(null);\n    setUserHistory([]);\n  };\n\n  return (\n    <div className=\"min-h-screen p-8 bg-gray-100\">\n      <h1 className=\"text-3xl font-bold mb-4\">\n        Admin Dashboard - Student Stress Levels\n      </h1>\n\n      {/* Quick Summary */}\n      <div className=\"flex flex-wrap gap-4 mb-4\">\n        <div className=\"px-4 py-2 bg-green-200 rounded font-semibold\">Low Stress: {lowCount}</div>\n        <div className=\"px-4 py-2 bg-yellow-200 rounded font-semibold\">Medium Stress: {mediumCount}</div>\n        <div className=\"px-4 py-2 bg-red-200 rounded font-semibold\">High Stress: {highCount}</div>\n        <div className=\"px-4 py-2 bg-gray-200 rounded font-semibold\">N/A: {naCount}</div>\n      </div>\n\n      {/* Legend */}\n      <div className=\"flex flex-wrap gap-4 mb-4 items-center\">\n        <span className=\"flex items-center gap-2\"><div className=\"w-4 h-4 bg-green-400 rounded-sm\"></div> Low (0-3)</span>\n        <span className=\"flex items-center gap-2\"><div className=\"w-4 h-4 bg-yellow-400 rounded-sm\"></div> Medium (4-7)</span>\n        <span className=\"flex items-center gap-2\"><div className=\"w-4 h-4 bg-red-400 rounded-sm\"></div> High (8-10)</span>\n        <span className=\"flex items-center gap-2\"><div className=\"w-4 h-4 bg-gray-400 rounded-sm\"></div> N/A</span>\n      </div>\n\n      {/* Filters */}\n      <div className=\"flex flex-wrap gap-4 mb-4\">\n        <input\n          type=\"text\"\n          placeholder=\"Search by email or UID\"\n          value={search}\n          onChange={(e) => setSearch(e.target.value)}\n          className=\"px-4 py-2 rounded border focus:outline-none focus:ring-2 focus:ring-blue-500\"\n        />\n        <select\n          value={filterLevel}\n          onChange={(e) => setFilterLevel(e.target.value)}\n          className=\"px-4 py-2 rounded border focus:outline-none focus:ring-2 focus:ring-blue-500\"\n        >\n          <option value=\"all\">All Levels</option>\n          <option value=\"low\">Low (0-3)</option>\n          <option value=\"medium\">Medium (4-7)</option>\n          <option value=\"high\">High (8-10)</option>\n          <option value=\"na\">N/A</option>\n        </select>\n      </div>\n\n      {loading ? (\n        <p>Loading...</p>\n      ) : (\n        <>\n          {/* Table */}\n          <div className=\"overflow-x-auto\">\n            <table className=\"min-w-full bg-white shadow-md rounded-lg overflow-hidden\">\n              <thead className=\"bg-indigo-600 text-white\">\n                <tr>\n                  <th className=\"py-3 px-6 text-left\">Email</th>\n                  <th className=\"py-3 px-6 text-left\">UID</th>\n                  <th className=\"py-3 px-6 text-left\">Stress Level</th>\n                  <th className=\"py-3 px-6 text-left\">Last Updated</th>\n                </tr>\n              </thead>\n              <tbody>\n                {paginatedData.map((user) => (\n                  <tr\n                    key={user.uid}\n                    className={`border-b hover:bg-gray-50 cursor-pointer ${getRowColor(user.stressLevel)}`}\n                    onClick={() => handleUserClick(user)}\n                  >\n                    <td className=\"py-3 px-6\">{user.email}</td>\n                    <td className=\"py-3 px-6\">{user.uid}</td>\n                    <td className=\"py-3 px-6\">{user.stressLevel} / 10</td>\n                    <td className=\"py-3 px-6\">{user.updatedAt ? new Date(user.updatedAt).toLocaleString() : \"-\"}</td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n\n          {/* Pagination */}\n          <div className=\"flex justify-center items-center gap-2 mt-4\">\n            <button onClick={() => setCurrentPage((p) => Math.max(p - 1, 1))} disabled={currentPage === 1} className=\"px-3 py-1 rounded border disabled:opacity-50\">Prev</button>\n            <span>Page {currentPage} of {totalPages}</span>\n            <button onClick={() => setCurrentPage((p) => Math.min(p + 1, totalPages))} disabled={currentPage === totalPages} className=\"px-3 py-1 rounded border disabled:opacity-50\">Next</button>\n          </div>\n        </>\n      )}\n\n      {/* Modal for user history */}\n      {selectedUser && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-6 w-full max-w-lg shadow-lg relative\">\n            <h2 className=\"text-xl font-bold mb-4\">{selectedUser.email} - Stress History</h2>\n            <button onClick={closeModal} className=\"absolute top-3 right-3 text-gray-500 hover:text-gray-800 font-bold text-lg\">Ã—</button>\n            {userHistory.length === 0 ? (\n              <p>No stress entries yet.</p>\n            ) : (\n              <ul className=\"space-y-2 max-h-64 overflow-y-auto\">\n                {userHistory.map((entry, idx) => (\n                  <li key={idx} className=\"border rounded p-2 flex justify-between bg-gray-50\">\n                    <span>Stress Level: {entry.stressLevel} / 10</span>\n                    <span>{new Date(entry.timestamp).toLocaleString()}</span>\n                  </li>\n                ))}\n              </ul>\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 540, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishalprajwal/Documents/mental-health/frontend/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 559, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishalprajwal/Documents/mental-health/frontend/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 564, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishalprajwal/Documents/mental-health/frontend/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0],"debugId":null}}]
}