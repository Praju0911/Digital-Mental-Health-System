{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishalprajwal/Documents/mental-health/frontend/src/lib/firebase.js"],"sourcesContent":["import { initializeApp, getApps } from \"firebase/app\";\nimport { getAuth } from \"firebase/auth\";\nimport { getFirestore } from \"firebase/firestore\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyAE-k8r8F4II_5rBfTvh6BNzQDku7KE_Gg\",\n  authDomain: \"mental-health-87a9d.firebaseapp.com\",\n  projectId: \"mental-health-87a9d\",\n  storageBucket: \"mental-health-87a9d.firebasestorage.app\",\n  messagingSenderId: \"500649525001\",\n  appId: \"1:500649525001:web:60ff34cd3656aebcbe9dd8\",\n  measurementId: \"G-6EVCYEMBVS\"\n};\n\nlet app;\nif (!getApps().length) {\n  app = initializeApp(firebaseConfig);\n} else {\n  app = getApps()[0];\n}\n\nconst auth = getAuth(app);\nconst db = getFirestore(app);\n\nexport { app, auth, db };"],"names":[],"mappings":";;;;;;;;AAAA;AAAA;AACA;AAAA;AACA;AAAA;;;;AAEA,MAAM,iBAAiB;IACrB,QAAQ;IACR,YAAY;IACZ,WAAW;IACX,eAAe;IACf,mBAAmB;IACnB,OAAO;IACP,eAAe;AACjB;AAEA,IAAI;AACJ,IAAI,CAAC,IAAA,2KAAO,IAAG,MAAM,EAAE;IACrB,MAAM,IAAA,iLAAa,EAAC;AACtB,OAAO;IACL,MAAM,IAAA,2KAAO,GAAE,CAAC,EAAE;AACpB;AAEA,MAAM,OAAO,IAAA,6KAAO,EAAC;AACrB,MAAM,KAAK,IAAA,iLAAY,EAAC","debugId":null}},
    {"offset": {"line": 157, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishalprajwal/Documents/mental-health/frontend/src/app/professional/chat/%5BsessionId%5D/page.jsx"],"sourcesContent":["\"use client\";\nimport { useState, useEffect, useRef } from 'react';\nimport { auth, db } from '@/lib/firebase';\nimport { collection, addDoc, serverTimestamp, query, orderBy, onSnapshot } from 'firebase/firestore';\nimport { onAuthStateChanged } from 'firebase/auth';\nimport { useParams, useRouter } from 'next/navigation';\n\nexport default function ProfessionalChatRoom() {\n  const [user, setUser] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const params = useParams();\n  const router = useRouter();\n  const sessionId = params.sessionId;\n  const messagesEndRef = useRef(null);\n\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, (currentUser) => {\n      if (currentUser) {\n        setUser(currentUser);\n      } else {\n        router.push('/login');\n      }\n    });\n    return () => unsubscribe();\n  }, [router]);\n\n  // Listen for real-time messages for this session\n  useEffect(() => {\n    if (!sessionId) return;\n    const messagesRef = collection(db, 'chatSessions', sessionId, 'messages');\n    const q = query(messagesRef, orderBy('timestamp'));\n\n    const unsubscribe = onSnapshot(q, (querySnapshot) => {\n      const msgs = [];\n      querySnapshot.forEach((doc) => {\n        msgs.push({ id: doc.id, ...doc.data() });\n      });\n      setMessages(msgs);\n    });\n\n    return () => unsubscribe();\n  }, [sessionId]);\n\n  // Auto-scroll to the bottom\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  const handleSendMessage = async (e) => {\n    e.preventDefault();\n    if (newMessage.trim() === '' || !user || !sessionId) return;\n\n    const messagesRef = collection(db, 'chatSessions', sessionId, 'messages');\n    await addDoc(messagesRef, {\n      text: newMessage,\n      senderId: user.uid,\n      timestamp: serverTimestamp()\n    });\n\n    setNewMessage('');\n  };\n\n  const handleEndChat = async () => {\n    if (!user || !sessionId) return;\n    // Navigate back to the professional dashboard\n    router.push('/professional/dashboard');\n  };\n\n  if (!user) {\n    return <p className=\"text-center mt-20\">Loading...</p>;\n  }\n\n  return (\n    <div className=\"flex flex-col h-screen bg-indigo-50\">\n        <header className=\"bg-indigo-600 text-white p-4 shadow-md flex justify-between items-center\">\n            <div>\n                <h1 className=\"text-xl font-semibold\">Professional Chat View</h1>\n                <p className=\"text-sm\">You are speaking with a student.</p>\n            </div>\n            <button \n              onClick={handleEndChat} \n              className=\"bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600\"\n            >\n                End Chat\n            </button>\n        </header>\n\n        <main className=\"flex-1 overflow-y-auto p-4\">\n            <div className=\"space-y-2\">\n                {messages.map(msg => (\n                    <div key={msg.id} className={`flex ${msg.senderId === user.uid ? 'justify-end' : 'justify-start'}`}>\n                        <div className={`p-3 rounded-xl max-w-xs lg:max-w-md ${msg.senderId === user.uid ? 'bg-indigo-600 text-white rounded-br-none' : 'bg-white text-gray-800 shadow-sm rounded-bl-none'}`}>\n                            {msg.text}\n                        </div>\n                    </div>\n                ))}\n                <div ref={messagesEndRef} />\n            </div>\n        </main>\n\n        <footer className=\"bg-white p-4 border-t\">\n            <form onSubmit={handleSendMessage} className=\"flex\">\n                <input\n                    type=\"text\"\n                    value={newMessage}\n                    onChange={(e) => setNewMessage(e.target.value)}\n                    placeholder=\"Type your response...\"\n                    className=\"flex-1 p-2 border rounded-l-lg focus:ring-indigo-500 focus:border-indigo-500\"\n                />\n                <button type=\"submit\" className=\"px-4 py-2 bg-indigo-600 text-white rounded-r-lg hover:bg-indigo-700\">\n                    Send\n                </button>\n            </form>\n        </footer>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}