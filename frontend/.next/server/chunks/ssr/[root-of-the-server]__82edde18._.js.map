{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dell/Digital-Mental-Health-System/frontend/src/app/admin/dashboard/page.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\n\r\nexport default function AdminDashboard() {\r\n  const [usersData, setUsersData] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [search, setSearch] = useState(\"\");\r\n  const [filterLevel, setFilterLevel] = useState(\"all\");\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [selectedUser, setSelectedUser] = useState(null);\r\n  const [userHistory, setUserHistory] = useState([]);\r\n  const rowsPerPage = 10;\r\n\r\n  useEffect(() => {\r\n    const fetchUsers = async () => {\r\n      try {\r\n        const res = await fetch(\"/api/admin/getUsers\");\r\n        const data = await res.json();\r\n        setUsersData(data);\r\n      } catch (err) {\r\n        console.error(\"Error fetching admin data:\", err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchUsers();\r\n  }, []);\r\n\r\n  const filteredData = usersData.filter((user) => {\r\n    const searchMatch =\r\n      user.email.toLowerCase().includes(search.toLowerCase()) ||\r\n      user.uid.toLowerCase().includes(search.toLowerCase());\r\n\r\n    const levelMatch =\r\n      filterLevel === \"all\"\r\n        ? true\r\n        : filterLevel === \"low\"\r\n        ? user.stressLevel < 4\r\n        : filterLevel === \"medium\"\r\n        ? user.stressLevel >= 4 && user.stressLevel <= 7\r\n        : filterLevel === \"high\"\r\n        ? user.stressLevel > 7\r\n        : filterLevel === \"na\"\r\n        ? user.stressLevel === \"N/A\"\r\n        : true;\r\n\r\n    return searchMatch && levelMatch;\r\n  });\r\n\r\n  const totalPages = Math.ceil(filteredData.length / rowsPerPage);\r\n  const paginatedData = filteredData.slice(\r\n    (currentPage - 1) * rowsPerPage,\r\n    currentPage * rowsPerPage\r\n  );\r\n\r\n  const getRowColor = (stressLevel) => {\r\n    if (stressLevel === \"N/A\") return \"bg-gray-200\";\r\n    if (stressLevel < 4) return \"bg-green-100\";\r\n    if (stressLevel <= 7) return \"bg-yellow-100\";\r\n    return \"bg-red-100\";\r\n  };\r\n\r\n  // Quick summary counts\r\n  const lowCount = usersData.filter(u => u.stressLevel !== \"N/A\" && u.stressLevel < 4).length;\r\n  const mediumCount = usersData.filter(u => u.stressLevel >= 4 && u.stressLevel <= 7).length;\r\n  const highCount = usersData.filter(u => u.stressLevel > 7).length;\r\n  const naCount = usersData.filter(u => u.stressLevel === \"N/A\").length;\r\n\r\n  // Fetch stress history for selected user\r\n  const handleUserClick = async (user) => {\r\n    setSelectedUser(user);\r\n    try {\r\n      const res = await fetch(`/api/admin/getUserHistory?uid=${user.uid}`);\r\n      const history = await res.json();\r\n      setUserHistory(history.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp)));\r\n    } catch (err) {\r\n      console.error(\"Error fetching user history:\", err);\r\n      setUserHistory([]);\r\n    }\r\n  };\r\n\r\n  const closeModal = () => {\r\n    setSelectedUser(null);\r\n    setUserHistory([]);\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen p-8 bg-gray-100\">\r\n      <h1 className=\"text-3xl font-bold mb-4\">\r\n        Admin Dashboard - Student Stress Levels\r\n      </h1>\r\n\r\n      {/* Quick Summary */}\r\n      <div className=\"flex flex-wrap gap-4 mb-4\">\r\n        <div className=\"px-4 py-2 bg-green-200 rounded font-semibold\">Low Stress: {lowCount}</div>\r\n        <div className=\"px-4 py-2 bg-yellow-200 rounded font-semibold\">Medium Stress: {mediumCount}</div>\r\n        <div className=\"px-4 py-2 bg-red-200 rounded font-semibold\">High Stress: {highCount}</div>\r\n        <div className=\"px-4 py-2 bg-gray-200 rounded font-semibold\">N/A: {naCount}</div>\r\n      </div>\r\n\r\n      {/* Legend */}\r\n      <div className=\"flex flex-wrap gap-4 mb-4 items-center\">\r\n        <span className=\"flex items-center gap-2\"><div className=\"w-4 h-4 bg-green-400 rounded-sm\"></div> Low (0-3)</span>\r\n        <span className=\"flex items-center gap-2\"><div className=\"w-4 h-4 bg-yellow-400 rounded-sm\"></div> Medium (4-7)</span>\r\n        <span className=\"flex items-center gap-2\"><div className=\"w-4 h-4 bg-red-400 rounded-sm\"></div> High (8-10)</span>\r\n        <span className=\"flex items-center gap-2\"><div className=\"w-4 h-4 bg-gray-400 rounded-sm\"></div> N/A</span>\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      <div className=\"flex flex-wrap gap-4 mb-4\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Search by email or UID\"\r\n          value={search}\r\n          onChange={(e) => setSearch(e.target.value)}\r\n          className=\"px-4 py-2 rounded border focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n        />\r\n        <select\r\n          value={filterLevel}\r\n          onChange={(e) => setFilterLevel(e.target.value)}\r\n          className=\"px-4 py-2 rounded border focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n        >\r\n          <option value=\"all\">All Levels</option>\r\n          <option value=\"low\">Low (0-3)</option>\r\n          <option value=\"medium\">Medium (4-7)</option>\r\n          <option value=\"high\">High (8-10)</option>\r\n          <option value=\"na\">N/A</option>\r\n        </select>\r\n      </div>\r\n\r\n      {loading ? (\r\n        <p>Loading...</p>\r\n      ) : (\r\n        <>\r\n          {/* Table */}\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"min-w-full bg-white shadow-md rounded-lg overflow-hidden\">\r\n              <thead className=\"bg-indigo-600 text-white\">\r\n                <tr>\r\n                  <th className=\"py-3 px-6 text-left\">Email</th>\r\n                  <th className=\"py-3 px-6 text-left\">UID</th>\r\n                  <th className=\"py-3 px-6 text-left\">Stress Level</th>\r\n                  <th className=\"py-3 px-6 text-left\">Last Updated</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {paginatedData.map((user) => (\r\n                  <tr\r\n                    key={user.uid}\r\n                    className={`border-b hover:bg-gray-50 cursor-pointer ${getRowColor(user.stressLevel)}`}\r\n                    onClick={() => handleUserClick(user)}\r\n                  >\r\n                    <td className=\"py-3 px-6\">{user.email}</td>\r\n                    <td className=\"py-3 px-6\">{user.uid}</td>\r\n                    <td className=\"py-3 px-6\">{user.stressLevel} / 10</td>\r\n                    <td className=\"py-3 px-6\">{user.updatedAt ? new Date(user.updatedAt).toLocaleString() : \"-\"}</td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n\r\n          {/* Pagination */}\r\n          <div className=\"flex justify-center items-center gap-2 mt-4\">\r\n            <button onClick={() => setCurrentPage((p) => Math.max(p - 1, 1))} disabled={currentPage === 1} className=\"px-3 py-1 rounded border disabled:opacity-50\">Prev</button>\r\n            <span>Page {currentPage} of {totalPages}</span>\r\n            <button onClick={() => setCurrentPage((p) => Math.min(p + 1, totalPages))} disabled={currentPage === totalPages} className=\"px-3 py-1 rounded border disabled:opacity-50\">Next</button>\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      {/* Modal for user history */}\r\n      {selectedUser && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white rounded-lg p-6 w-full max-w-lg shadow-lg relative\">\r\n            <h2 className=\"text-xl font-bold mb-4\">{selectedUser.email} - Stress History</h2>\r\n            <button onClick={closeModal} className=\"absolute top-3 right-3 text-gray-500 hover:text-gray-800 font-bold text-lg\">Ã—</button>\r\n            {userHistory.length === 0 ? (\r\n              <p>No stress entries yet.</p>\r\n            ) : (\r\n              <ul className=\"space-y-2 max-h-64 overflow-y-auto\">\r\n                {userHistory.map((entry, idx) => (\r\n                  <li key={idx} className=\"border rounded p-2 flex justify-between bg-gray-50\">\r\n                    <span>Stress Level: {entry.stressLevel} / 10</span>\r\n                    <span>{new Date(entry.timestamp).toLocaleString()}</span>\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 540, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dell/Digital-Mental-Health-System/frontend/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 559, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dell/Digital-Mental-Health-System/frontend/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,kKACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 564, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dell/Digital-Mental-Health-System/frontend/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,kKACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0],"debugId":null}}]
}