{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishalprajwal/Documents/mental-health/frontend/src/lib/firebase.js"],"sourcesContent":["import { initializeApp, getApps } from \"firebase/app\";\nimport { getAuth } from \"firebase/auth\";\nimport { getFirestore } from \"firebase/firestore\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyAE-k8r8F4II_5rBfTvh6BNzQDku7KE_Gg\",\n  authDomain: \"mental-health-87a9d.firebaseapp.com\",\n  projectId: \"mental-health-87a9d\",\n  storageBucket: \"mental-health-87a9d.firebasestorage.app\",\n  messagingSenderId: \"500649525001\",\n  appId: \"1:500649525001:web:60ff34cd3656aebcbe9dd8\",\n  measurementId: \"G-6EVCYEMBVS\"\n};\n\nlet app;\nif (!getApps().length) {\n  app = initializeApp(firebaseConfig);\n} else {\n  app = getApps()[0];\n}\n\nconst auth = getAuth(app);\nconst db = getFirestore(app);\n\nexport { app, auth, db };"],"names":[],"mappings":";;;;;;;;AAAA;AAAA;AACA;AAAA;AACA;AAAA;;;;AAEA,MAAM,iBAAiB;IACrB,QAAQ;IACR,YAAY;IACZ,WAAW;IACX,eAAe;IACf,mBAAmB;IACnB,OAAO;IACP,eAAe;AACjB;AAEA,IAAI;AACJ,IAAI,CAAC,IAAA,2KAAO,IAAG,MAAM,EAAE;IACrB,MAAM,IAAA,iLAAa,EAAC;AACtB,OAAO;IACL,MAAM,IAAA,2KAAO,GAAE,CAAC,EAAE;AACpB;AAEA,MAAM,OAAO,IAAA,6KAAO,EAAC;AACrB,MAAM,KAAK,IAAA,iLAAY,EAAC","debugId":null}},
    {"offset": {"line": 157, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishalprajwal/Documents/mental-health/frontend/src/app/professional/dashboard/page.jsx"],"sourcesContent":["\"use client\";\nimport { useState, useEffect } from 'react';\nimport { auth, db } from '@/lib/firebase';\nimport { collection, onSnapshot, query, orderBy, doc, updateDoc, deleteDoc } from 'firebase/firestore';\nimport { onAuthStateChanged, signOut } from 'firebase/auth';\nimport { useRouter } from 'next/navigation';\n\nexport default function ProfessionalDashboard() {\n  const [user, setUser] = useState(null);\n  const [chatQueue, setChatQueue] = useState([]);\n  const [userName, setUserName] = useState('Professional');\n  const router = useRouter();\n\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, (currentUser) => {\n      if (currentUser) {\n        setUser(currentUser);\n        const nameFromEmail = currentUser.email.split('@')[0];\n        setUserName(nameFromEmail.charAt(0).toUpperCase() + nameFromEmail.slice(1));\n      } else {\n        router.push('/login');\n      }\n    });\n    return () => unsubscribe();\n  }, [router]);\n\n  // Listen for real-time updates on the chat queue\n  useEffect(() => {\n    const q = query(collection(db, \"chatQueue\"), orderBy(\"requestedAt\", \"asc\"));\n    const unsubscribe = onSnapshot(q, (snapshot) => {\n      const queue = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n      setChatQueue(queue);\n    });\n    return () => unsubscribe();\n  }, []);\n\n  const handleAcceptChat = async (request) => {\n    if (!user) return;\n    \n    // Update the session document to active\n    const sessionRef = doc(db, 'chatSessions', request.sessionId);\n    await updateDoc(sessionRef, {\n        professionalId: user.uid,\n        status: 'active'\n    });\n    \n    // Remove the request from the queue\n    await deleteDoc(doc(db, 'chatQueue', request.id));\n    \n    // Redirect to the professional chat room\n    router.push(`/professional/chat/${request.sessionId}`);\n  };\n\n  const handleLogout = async () => {\n    try {\n      await signOut(auth);\n      router.push('/login');\n    } catch (error) {\n      console.error(\"Error signing out:\", error);\n    }\n  };\n\n  if (!user) return <p className=\"text-center mt-20\">Loading...</p>;\n\n  return (\n    <div className=\"min-h-screen bg-indigo-50\">\n      <header className=\"bg-white shadow-sm\">\n        <div className=\"max-w-4xl mx-auto py-6 px-4 flex justify-between items-center\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-800\">Welcome, {userName}</h1>\n            <p className=\"text-gray-500 mt-1\">Students are waiting for your support.</p>\n          </div>\n          <button\n            onClick={handleLogout}\n            className=\"bg-indigo-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-indigo-700 transition\"\n          >\n            Logout\n          </button>\n        </div>\n      </header>\n\n      <main className=\"max-w-4xl mx-auto py-8 px-4\">\n        <div className=\"bg-white p-6 rounded-xl shadow-lg\">\n          <h2 className=\"text-2xl font-semibold mb-4 text-gray-800\">Student Chat Queue ({chatQueue.length})</h2>\n          <div className=\"space-y-4\">\n            {chatQueue.length > 0 ? (\n              chatQueue.map((request) => (\n                <div key={request.id} className=\"p-4 border rounded-lg flex justify-between items-center bg-gray-50 hover:bg-gray-100 transition\">\n                  <div>\n                    {/* --- UPDATED PART: Displaying anonymousName --- */}\n                    <p className=\"font-semibold text-gray-700\">Student: {request.anonymousName}</p>\n                    <p className=\"text-sm text-gray-500\">\n                      Requested at: {new Date(request.requestedAt?.toDate()).toLocaleTimeString()}\n                    </p>\n                  </div>\n                  <button \n                    onClick={() => handleAcceptChat(request)} \n                    className=\"bg-green-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-600 transition-transform transform hover:scale-105\"\n                  >\n                    Accept Chat\n                  </button>\n                </div>\n              ))\n            ) : (\n              <p className=\"text-center text-gray-500 py-8\">The queue is currently empty. Well done!</p>\n            )}\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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","debugId":null}}]
}