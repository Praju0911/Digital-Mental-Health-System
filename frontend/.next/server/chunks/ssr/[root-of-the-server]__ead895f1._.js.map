{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishalprajwal/Documents/mental-health/frontend/src/lib/firebase.js"],"sourcesContent":["import { initializeApp, getApps } from \"firebase/app\";\nimport { getAuth } from \"firebase/auth\";\nimport { getFirestore } from \"firebase/firestore\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyAE-k8r8F4II_5rBfTvh6BNzQDku7KE_Gg\",\n  authDomain: \"mental-health-87a9d.firebaseapp.com\",\n  projectId: \"mental-health-87a9d\",\n  storageBucket: \"mental-health-87a9d.firebasestorage.app\",\n  messagingSenderId: \"500649525001\",\n  appId: \"1:500649525001:web:60ff34cd3656aebcbe9dd8\",\n  measurementId: \"G-6EVCYEMBVS\"\n};\n\nlet app;\nif (!getApps().length) {\n  app = initializeApp(firebaseConfig);\n} else {\n  app = getApps()[0];\n}\n\nconst auth = getAuth(app);\nconst db = getFirestore(app);\n\nexport { app, auth, db };"],"names":[],"mappings":";;;;;;;;AAAA;AAAA;AACA;AAAA;AACA;AAAA;;;;AAEA,MAAM,iBAAiB;IACrB,QAAQ;IACR,YAAY;IACZ,WAAW;IACX,eAAe;IACf,mBAAmB;IACnB,OAAO;IACP,eAAe;AACjB;AAEA,IAAI;AACJ,IAAI,CAAC,IAAA,2KAAO,IAAG,MAAM,EAAE;IACrB,MAAM,IAAA,iLAAa,EAAC;AACtB,OAAO;IACL,MAAM,IAAA,2KAAO,GAAE,CAAC,EAAE;AACpB;AAEA,MAAM,OAAO,IAAA,6KAAO,EAAC;AACrB,MAAM,KAAK,IAAA,iLAAY,EAAC","debugId":null}},
    {"offset": {"line": 157, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishalprajwal/Documents/mental-health/frontend/src/app/components/StressMeter.jsx"],"sourcesContent":["\"use client\";\nimport { useState, useEffect, useRef } from \"react\";\nimport GaugeChart from \"react-gauge-chart\";\nimport { db } from \"@/lib/firebase\";\nimport { doc, setDoc, getDoc } from \"firebase/firestore\";\n\n// The component now accepts an `onSubmitted` function as a prop\nexport default function StressMeter({ userId, onSubmitted }) {\n  const [level, setLevel] = useState(0.5);\n  const [displayLevel, setDisplayLevel] = useState(0.5);\n  const [saving, setSaving] = useState(false);\n  const [emoji, setEmoji] = useState(\"üòê\");\n  const animationRef = useRef();\n\n  // Load previous stress level from Firestore\n  useEffect(() => {\n    const loadStress = async () => {\n      if (!userId) return;\n      try {\n        const docRef = doc(db, \"stressLevels\", userId);\n        const docSnap = await getDoc(docRef);\n        if (docSnap.exists()) {\n          const savedLevel = docSnap.data().stressLevel / 10; // scale 0-1\n          setLevel(savedLevel);\n          setDisplayLevel(savedLevel);\n        }\n      } catch (err) {\n        console.error(\"Error loading stress level:\", err);\n      }\n    };\n    loadStress();\n  }, [userId]);\n\n  // Animate needle smoothly to the target level\n  useEffect(() => {\n    const animate = () => {\n      setDisplayLevel((prev) => {\n        const diff = level - prev;\n        if (Math.abs(diff) < 0.001) return level; // Stop when close enough\n        return prev + diff * 0.1;\n      });\n      animationRef.current = requestAnimationFrame(animate);\n    };\n    animationRef.current = requestAnimationFrame(animate);\n    return () => cancelAnimationFrame(animationRef.current);\n  }, [level]);\n  \n  // Update emoji based on the current animated level\n  useEffect(() => {\n    if (displayLevel < 0.33) setEmoji(\"üòä\");\n    else if (displayLevel < 0.66) setEmoji(\"üòê\");\n    else setEmoji(\"üò¢\");\n  }, [displayLevel]);\n\n  // Change background color based on stress\n  const bgColor = () => {\n    if (displayLevel < 0.33) return \"bg-green-100\";\n    if (displayLevel < 0.66) return \"bg-yellow-100\";\n    return \"bg-red-100\";\n  };\n\n  // Save stress level to Firestore and notify the parent component\n  const handleSave = async () => {\n    if (!userId) return;\n    try {\n      setSaving(true);\n      const stressLevel = Math.round(level * 10);\n      const docRef = doc(db, \"stressLevels\", userId);\n      await setDoc(docRef, { stressLevel, updatedAt: new Date() });\n      \n      // Call the onSubmitted function passed from the dashboard\n      if (onSubmitted) {\n        onSubmitted();\n      }\n\n    } catch (err) {\n      console.error(\"Error saving stress level:\", err);\n      alert(\"Error saving stress level ‚ùå\");\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  return (\n    <div className={`flex flex-col items-center justify-center w-full max-w-md rounded-xl p-8 space-y-6 transition-colors duration-500 ${bgColor()}`}>\n      <h1 className=\"text-3xl font-bold text-gray-800 text-center\">\n        Daily Stress Meter\n      </h1>\n      <div className=\"text-6xl animate-bounce\">{emoji}</div>\n      <GaugeChart\n        id=\"animated-gauge\"\n        nrOfLevels={20}\n        colors={[\"#5BE12C\", \"#F5CD19\", \"#EA4228\"]} // Green, Yellow, Red\n        percent={displayLevel}\n        arcPadding={0.02}\n        needleColor=\"#333333\"\n        needleBaseColor=\"#333333\"\n        animate={false} // We handle animation manually for a smoother feel\n        textColor=\"#000\"\n        formatTextValue={() => `${Math.round(displayLevel * 10)} / 10`}\n      />\n      <input\n        type=\"range\"\n        min={0}\n        max={1}\n        step={0.01}\n        value={level}\n        onChange={(e) => setLevel(parseFloat(e.target.value))}\n        className=\"w-full h-2 bg-gray-300 rounded-lg accent-indigo-600\"\n      />\n      <p className=\"text-lg font-semibold\">\n        Selected Level: {Math.round(level * 10)} / 10\n      </p>\n      <button\n        onClick={handleSave}\n        disabled={saving}\n        className=\"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-4 rounded-xl shadow-lg disabled:opacity-50 transition-transform transform hover:scale-105\"\n      >\n        {saving ? \"Saving...\" : \"Submit Stress Level\"}\n      </button>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 335, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishalprajwal/Documents/mental-health/frontend/src/app/student/dashboard/page.jsx"],"sourcesContent":["\"use client\";\nimport { useState, useEffect } from 'react';\nimport { auth, db } from '@/lib/firebase';\nimport { collection, addDoc, serverTimestamp, query, where, getDocs } from 'firebase/firestore';\nimport { onAuthStateChanged, signOut } from 'firebase/auth'; // Import signOut\nimport { useRouter } from 'next/navigation';\nimport StressMeter from '@/app/components/StressMeter';\n\nexport default function StudentDashboard() {\n  const [user, setUser] = useState(null);\n  const [status, setStatus] = useState('');\n  const [userName, setUserName] = useState('Student');\n  const [stressSubmitted, setStressSubmitted] = useState(false);\n  const router = useRouter();\n\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, (currentUser) => {\n      if (currentUser) {\n        setUser(currentUser);\n        const nameFromEmail = currentUser.email.split('@')[0];\n        setUserName(nameFromEmail.charAt(0).toUpperCase() + nameFromEmail.slice(1));\n      } else {\n        router.push('/login');\n      }\n    });\n    return () => unsubscribe();\n  }, [router]);\n\n  const handleRequestChat = async () => {\n    if (!user) return;\n    setStatus('Checking for existing requests...');\n    const q = query(collection(db, \"chatQueue\"), where(\"studentId\", \"==\", user.uid));\n    const querySnapshot = await getDocs(q);\n    if (!querySnapshot.empty) {\n        setStatus('You already have a pending chat request.');\n        const existingSessionId = querySnapshot.docs[0].data().sessionId;\n        router.push(`/student/chat/${existingSessionId}`);\n        return;\n    }\n\n    setStatus('Sending request...');\n    const sessionRef = await addDoc(collection(db, \"chatSessions\"), {\n        studentId: user.uid,\n        createdAt: serverTimestamp(),\n        status: 'pending'\n    });\n    await addDoc(collection(db, \"chatQueue\"), {\n        studentId: user.uid,\n        studentEmail: user.email,\n        sessionId: sessionRef.id,\n        requestedAt: serverTimestamp()\n    });\n    setStatus('Chat request sent! Waiting for a professional.');\n    router.push(`/student/chat/${sessionRef.id}`);\n  };\n  \n  // --- NEW LOGOUT FUNCTION ---\n  const handleLogout = async () => {\n    try {\n      await signOut(auth);\n      router.push('/login');\n    } catch (error) {\n      console.error(\"Error signing out:\", error);\n    }\n  };\n\n  if (!user) return <p className=\"text-center mt-20\">Loading...</p>;\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <header className=\"bg-white shadow-sm\">\n        <div className=\"max-w-4xl mx-auto py-6 px-4 flex justify-between items-center\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-800\">Welcome, {userName}!</h1>\n            <p className=\"text-gray-500 mt-1\">\n              {stressSubmitted ? \"Thank you for checking in.\" : \"Let's start with your daily check-in.\"}\n            </p>\n          </div>\n          {/* --- NEW LOGOUT BUTTON --- */}\n          <button\n            onClick={handleLogout}\n            className=\"bg-red-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-600 transition\"\n          >\n            Logout\n          </button>\n        </div>\n      </header>\n\n      <main className=\"flex items-center justify-center py-8 px-4\">\n        {!stressSubmitted ? (\n          <StressMeter userId={user.uid} onSubmitted={() => setStressSubmitted(true)} />\n        ) : (\n          <div className=\"bg-white p-8 rounded-xl shadow-lg flex flex-col items-center text-center max-w-md\">\n              <div className=\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-6\">\n                <svg className=\"w-8 h-8 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M5 13l4 4L19 7\"></path></svg>\n              </div>\n              <h2 className=\"text-2xl font-semibold mb-2 text-gray-800\">Thank You for Your Submission!</h2>\n              <p className=\"text-gray-600 mb-6\">Your well-being is important. If you need to talk, support is just a click away.</p>\n              <button \n                onClick={handleRequestChat} \n                className=\"w-full bg-blue-500 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-600 transition-transform transform hover:scale-105\"\n              >\n                Speak to a Professional\n              </button>\n              {status && <p className=\"mt-4 text-center text-sm text-gray-500\">{status}</p>}\n          </div>\n        )}\n      </main>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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","debugId":null}}]
}