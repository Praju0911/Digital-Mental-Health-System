{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishalprajwal/Documents/mental-health/frontend/src/lib/firebase.js"],"sourcesContent":["import { initializeApp, getApps } from \"firebase/app\";\nimport { getAuth } from \"firebase/auth\";\nimport { getFirestore } from \"firebase/firestore\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyAE-k8r8F4II_5rBfTvh6BNzQDku7KE_Gg\",\n  authDomain: \"mental-health-87a9d.firebaseapp.com\",\n  projectId: \"mental-health-87a9d\",\n  storageBucket: \"mental-health-87a9d.firebasestorage.app\",\n  messagingSenderId: \"500649525001\",\n  appId: \"1:500649525001:web:60ff34cd3656aebcbe9dd8\",\n  measurementId: \"G-6EVCYEMBVS\"\n};\n\nlet app;\nif (!getApps().length) {\n  app = initializeApp(firebaseConfig);\n} else {\n  app = getApps()[0];\n}\n\nconst auth = getAuth(app);\nconst db = getFirestore(app);\n\nexport { app, auth, db };"],"names":[],"mappings":";;;;;;;;AAAA;AAAA;AACA;AAAA;AACA;AAAA;;;;AAEA,MAAM,iBAAiB;IACrB,QAAQ;IACR,YAAY;IACZ,WAAW;IACX,eAAe;IACf,mBAAmB;IACnB,OAAO;IACP,eAAe;AACjB;AAEA,IAAI;AACJ,IAAI,CAAC,IAAA,2KAAO,IAAG,MAAM,EAAE;IACrB,MAAM,IAAA,iLAAa,EAAC;AACtB,OAAO;IACL,MAAM,IAAA,2KAAO,GAAE,CAAC,EAAE;AACpB;AAEA,MAAM,OAAO,IAAA,6KAAO,EAAC;AACrB,MAAM,KAAK,IAAA,iLAAY,EAAC","debugId":null}},
    {"offset": {"line": 157, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishalprajwal/Documents/mental-health/frontend/src/app/student/dashboard/page.jsx"],"sourcesContent":["\"use client\";\nimport { useState, useEffect } from 'react';\nimport { auth, db } from '@/lib/firebase';\nimport { collection, addDoc, serverTimestamp, query, where, getDocs } from 'firebase/firestore';\nimport { onAuthStateChanged } from 'firebase/auth';\nimport Link from 'next/link';\nimport { useRouter, useSearchParams } from 'next/navigation';\n\nexport default function StudentDashboard() {\n  const [user, setUser] = useState(null);\n  const [status, setStatus] = useState('');\n  const [userName, setUserName] = useState('Student');\n  const [showPostSubmitMessage, setShowPostSubmitMessage] = useState(false); // New state\n  const router = useRouter();\n  const searchParams = useSearchParams(); // Hook to read URL parameters\n\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, (currentUser) => {\n      if (currentUser) {\n        setUser(currentUser);\n        const nameFromEmail = currentUser.email.split('@')[0];\n        setUserName(nameFromEmail.charAt(0).toUpperCase() + nameFromEmail.slice(1));\n      } else {\n        router.push('/login');\n      }\n    });\n    \n    // Check for the 'submitted' parameter in the URL when the component mounts\n    if (searchParams.get('submitted') === 'true') {\n        setShowPostSubmitMessage(true);\n    }\n    \n    return () => unsubscribe();\n  }, [router, searchParams]);\n\n  const handleRequestChat = async () => {\n    if (!user) return;\n    setStatus('Checking for existing requests...');\n    const q = query(collection(db, \"chatQueue\"), where(\"studentId\", \"==\", user.uid));\n    const querySnapshot = await getDocs(q);\n    if (!querySnapshot.empty) {\n        setStatus('You already have a pending chat request.');\n        const existingSessionId = querySnapshot.docs[0].data().sessionId;\n        router.push(`/student/chat/${existingSessionId}`);\n        return;\n    }\n\n    setStatus('Sending request...');\n    const sessionRef = await addDoc(collection(db, \"chatSessions\"), {\n        studentId: user.uid,\n        createdAt: serverTimestamp(),\n        status: 'pending'\n    });\n    await addDoc(collection(db, \"chatQueue\"), {\n        studentId: user.uid,\n        studentEmail: user.email,\n        sessionId: sessionRef.id,\n        requestedAt: serverTimestamp()\n    });\n    setStatus('Chat request sent! Waiting for a professional.');\n    router.push(`/student/chat/${sessionRef.id}`);\n  };\n\n  if (!user) return <p className=\"text-center mt-20\">Loading...</p>;\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <header className=\"bg-white shadow-sm\">\n        <div className=\"max-w-4xl mx-auto py-6 px-4\">\n          <h1 className=\"text-3xl font-bold text-gray-800\">Welcome, {userName}!</h1>\n          <p className=\"text-gray-500 mt-1\">Here are your tools for a better day.</p>\n        </div>\n      </header>\n\n      <main className=\"max-w-4xl mx-auto py-8 px-4\">\n        {/* --- NEW CONDITIONAL MESSAGE AND BUTTON --- */}\n        {showPostSubmitMessage && (\n            <div className=\"bg-green-100 border-l-4 border-green-500 text-green-700 p-4 rounded-lg mb-8 shadow-md\" role=\"alert\">\n                <p className=\"font-bold\">Thank you for your submission!</p>\n                <p>Your well-being is important. If you feel you need to talk to someone, support is just a click away.</p>\n                <button \n                    onClick={handleRequestChat} \n                    className=\"mt-4 bg-green-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-600 transition\"\n                >\n                    Talk to a Professional Now\n                </button>\n            </div>\n        )}\n\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\n            {/* Stress Meter Card */}\n            <div className=\"bg-white p-6 rounded-xl shadow-lg flex flex-col items-center text-center\">\n              <h2 className=\"text-2xl font-semibold mb-2 text-gray-800\">Daily Stress Check-in</h2>\n              <p className=\"text-gray-600 mb-6\">Take a moment to reflect on your current stress level. Your insights help you understand your patterns.</p>\n              <Link href=\"/student/stress-meter\" className=\"w-full bg-indigo-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-indigo-700 transition-transform transform hover:scale-105\">\n                Open Stress Meter\n              </Link>\n            </div>\n\n            {/* Request a Chat Card */}\n            <div className=\"bg-white p-6 rounded-xl shadow-lg flex flex-col items-center text-center\">\n              <h2 className=\"text-2xl font-semibold mb-2 text-gray-800\">Need to Talk?</h2>\n              <p className=\"text-gray-600 mb-6\">Connect with a certified professional for a confidential conversation whenever you need support.</p>\n              <button onClick={handleRequestChat} className=\"w-full bg-blue-500 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-600 transition-transform transform hover:scale-105\">\n                Request a Live Chat\n              </button>\n              {status && <p className=\"mt-4 text-center text-sm text-gray-500\">{status}</p>}\n            </div>\n        </div>\n      </main>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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","debugId":null}}]
}