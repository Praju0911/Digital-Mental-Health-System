{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishalprajwal/Documents/mental-health/frontend/src/lib/firebase.js"],"sourcesContent":["import { initializeApp, getApps } from \"firebase/app\";\nimport { getAuth } from \"firebase/auth\";\nimport { getFirestore } from \"firebase/firestore\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyAE-k8r8F4II_5rBfTvh6BNzQDku7KE_Gg\",\n  authDomain: \"mental-health-87a9d.firebaseapp.com\",\n  projectId: \"mental-health-87a9d\",\n  storageBucket: \"mental-health-87a9d.firebasestorage.app\",\n  messagingSenderId: \"500649525001\",\n  appId: \"1:500649525001:web:60ff34cd3656aebcbe9dd8\",\n  measurementId: \"G-6EVCYEMBVS\"\n};\n\nlet app;\nif (!getApps().length) {\n  app = initializeApp(firebaseConfig);\n} else {\n  app = getApps()[0];\n}\n\nconst auth = getAuth(app);\nconst db = getFirestore(app);\n\nexport { app, auth, db };"],"names":[],"mappings":";;;;;;;;AAAA;AAAA;AACA;AAAA;AACA;AAAA;;;;AAEA,MAAM,iBAAiB;IACrB,QAAQ;IACR,YAAY;IACZ,WAAW;IACX,eAAe;IACf,mBAAmB;IACnB,OAAO;IACP,eAAe;AACjB;AAEA,IAAI;AACJ,IAAI,CAAC,IAAA,8KAAO,IAAG,MAAM,EAAE;IACrB,MAAM,IAAA,oLAAa,EAAC;AACtB,OAAO;IACL,MAAM,IAAA,8KAAO,GAAE,CAAC,EAAE;AACpB;AAEA,MAAM,OAAO,IAAA,wKAAO,EAAC;AACrB,MAAM,KAAK,IAAA,kLAAY,EAAC","debugId":null}},
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishalprajwal/Documents/mental-health/frontend/src/app/professional/dashboard/page.jsx"],"sourcesContent":["\"use client\";\nimport { useState, useEffect } from 'react';\nimport { auth, db } from '@/lib/firebase';\nimport { collection, onSnapshot, query, orderBy, doc, updateDoc, deleteDoc } from 'firebase/firestore';\nimport { onAuthStateChanged } from 'firebase/auth';\nimport { useRouter } from 'next/navigation';\nimport Link from 'next/link';\n\nexport default function ProfessionalDashboard() {\n  const [user, setUser] = useState(null);\n  const [chatQueue, setChatQueue] = useState([]);\n  const [userName, setUserName] = useState('Professional');\n  const router = useRouter();\n\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, (currentUser) => {\n      if (currentUser) {\n        setUser(currentUser);\n        const nameFromEmail = currentUser.email.split('@')[0];\n        setUserName(nameFromEmail.charAt(0).toUpperCase() + nameFromEmail.slice(1));\n      } else {\n        router.push('/login');\n      }\n    });\n    return () => unsubscribe();\n  }, [router]);\n\n  // Listen for real-time updates on the chat queue\n  useEffect(() => {\n    const q = query(collection(db, \"chatQueue\"), orderBy(\"requestedAt\", \"asc\"));\n    const unsubscribe = onSnapshot(q, (querySnapshot) => {\n      const queue = [];\n      querySnapshot.forEach((doc) => {\n        queue.push({ id: doc.id, ...doc.data() });\n      });\n      setChatQueue(queue);\n    });\n    return () => unsubscribe();\n  }, []);\n\n  const handleAcceptChat = async (request) => {\n    if (!user) return;\n    \n    // 1. Update the session document to active and add professional's ID\n    const sessionRef = doc(db, 'chatSessions', request.sessionId);\n    await updateDoc(sessionRef, {\n        professionalId: user.uid,\n        status: 'active'\n    });\n    \n    // 2. Remove the request from the queue collection\n    await deleteDoc(doc(db, 'chatQueue', request.id));\n    \n    // 3. Redirect to the dedicated professional chat room\n    router.push(`/professional/chat/${request.sessionId}`);\n  };\n\n  if (!user) return <p className=\"text-center mt-20\">Loading...</p>;\n\n  return (\n    <div className=\"min-h-screen bg-indigo-50\">\n      <header className=\"bg-white shadow-sm\">\n        <div className=\"max-w-4xl mx-auto py-6 px-4 flex justify-between items-center\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-800\">Welcome, {userName}</h1>\n            <p className=\"text-gray-500 mt-1\">Students are waiting for your support.</p>\n          </div>\n          <Link href=\"/login\" onClick={() => auth.signOut()} className=\"bg-indigo-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-indigo-700 transition\">\n            Logout\n          </Link>\n        </div>\n      </header>\n\n      <main className=\"max-w-4xl mx-auto py-8 px-4\">\n        <div className=\"bg-white p-6 rounded-xl shadow-lg\">\n          <h2 className=\"text-2xl font-semibold mb-4 text-gray-800\">Student Chat Queue ({chatQueue.length})</h2>\n          <div className=\"space-y-4\">\n            {chatQueue.length > 0 ? (\n              chatQueue.map((request) => (\n                <div key={request.id} className=\"p-4 border rounded-lg flex justify-between items-center bg-gray-50\">\n                  <div>\n                    <p className=\"font-semibold text-gray-700\">Student Email: {request.studentEmail}</p>\n                    <p className=\"text-sm text-gray-500\">\n                      Requested at: {new Date(request.requestedAt?.toDate()).toLocaleTimeString()}\n                    </p>\n                  </div>\n                  <button \n                    onClick={() => handleAcceptChat(request)} \n                    className=\"bg-green-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-600 transition-transform transform hover:scale-105\"\n                  >\n                    Accept Chat\n                  </button>\n                </div>\n              ))\n            ) : (\n              <p className=\"text-center text-gray-500 py-8\">The queue is currently empty. Well done!</p>\n            )}\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}